"use strict";/*
 * Copyright The OpenTelemetry Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cov_xll5socwd(){var path="/Users/zocong/Documents/forked/aws-opentelemetry-js/packages/opentelemetry-id-generator-aws-xray/src/platform/node/AwsXrayIdGenerator.ts";var hash="25afa42301cbf739155e8fc2c5176d2c6c8f74bb";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/zocong/Documents/forked/aws-opentelemetry-js/packages/opentelemetry-id-generator-aws-xray/src/platform/node/AwsXrayIdGenerator.ts",statementMap:{"0":{start:{line:17,column:0},end:{line:17,column:62}},"1":{start:{line:18,column:0},end:{line:18,column:36}},"2":{start:{line:19,column:15},end:{line:19,column:32}},"3":{start:{line:20,column:22},end:{line:20,column:23}},"4":{start:{line:21,column:23},end:{line:21,column:25}},"5":{start:{line:22,column:19},end:{line:22,column:20}},"6":{start:{line:33,column:23},end:{line:33,column:65}},"7":{start:{line:34,column:8},end:{line:34,column:88}},"8":{start:{line:41,column:8},end:{line:41,column:65}},"9":{start:{line:44,column:0},end:{line:44,column:48}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:32,column:4},end:{line:32,column:5}},loc:{start:{line:32,column:22},end:{line:35,column:5}},line:32},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:4},end:{line:40,column:5}},loc:{start:{line:40,column:21},end:{line:42,column:5}},line:40}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0,"1":0},b:{},inputSourceMap:{version:3,file:"/Users/zocong/Documents/forked/aws-opentelemetry-js/packages/opentelemetry-id-generator-aws-xray/src/platform/node/AwsXrayIdGenerator.ts",sources:["/Users/zocong/Documents/forked/aws-opentelemetry-js/packages/opentelemetry-id-generator-aws-xray/src/platform/node/AwsXrayIdGenerator.ts"],names:[],mappings:";AAAA;;;;;;;;;;;;;;GAcG;;;AAEH,iCAAiC;AAGjC,MAAM,aAAa,GAAG,CAAC,CAAC;AACxB,MAAM,cAAc,GAAG,EAAE,CAAC;AAC1B,MAAM,UAAU,GAAG,CAAC,CAAC;AAErB;;GAEG;AACH,MAAa,kBAAkB;IAE7B;;;;OAIG;IACH,eAAe;QACb,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC1D,OAAO,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,cAAc,GAAG,UAAU,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClF,CAAC;IAED;;;OAGG;IACH,cAAc;QACZ,OAAO,MAAM,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC3D,CAAC;CACF;AAnBD,gDAmBC",sourcesContent:["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as crypto from 'crypto';\nimport { IdGenerator } from '@opentelemetry/core';\n\nconst SPAN_ID_BYTES = 8;\nconst TRACE_ID_BYTES = 16;\nconst TIME_BYTES = 4;\n\n/** IdGenerator that generates trace IDs conforming to AWS X-Ray format. \n * https://docs.aws.amazon.com/xray/latest/devguide/xray-api-sendingdata.html#xray-api-traceids\n */\nexport class AwsXrayIdGenerator implements IdGenerator {\n\n  /**\n   * Returns a random 16-byte trace ID formatted/encoded as a 32 lowercase hex\n   * characters corresponding to 128 bits. The first 4 bytes correspond to the current\n   * time, in seconds, as per X-Ray trace ID format.\n   */\n  generateTraceId(): string {\n    const nowSec = Math.floor(Date.now() / 1000).toString(16);\n    return nowSec + crypto.randomBytes(TRACE_ID_BYTES - TIME_BYTES).toString('hex');\n  }\n\n  /**\n   * Returns a random 8-byte span ID formatted/encoded as a 16 lowercase hex\n   * characters corresponding to 64 bits.\n   */\n  generateSpanId(): string {\n    return crypto.randomBytes(SPAN_ID_BYTES).toString('hex');\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"25afa42301cbf739155e8fc2c5176d2c6c8f74bb"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_xll5socwd=function(){return actualCoverage;};}return actualCoverage;}cov_xll5socwd();cov_xll5socwd().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_xll5socwd().s[1]++;exports.AwsXrayIdGenerator=void 0;const crypto=(cov_xll5socwd().s[2]++,require("crypto"));const SPAN_ID_BYTES=(cov_xll5socwd().s[3]++,8);const TRACE_ID_BYTES=(cov_xll5socwd().s[4]++,16);const TIME_BYTES=(cov_xll5socwd().s[5]++,4);/** IdGenerator that generates trace IDs conforming to AWS X-Ray format.
 * https://docs.aws.amazon.com/xray/latest/devguide/xray-api-sendingdata.html#xray-api-traceids
 */class AwsXrayIdGenerator{/**
     * Returns a random 16-byte trace ID formatted/encoded as a 32 lowercase hex
     * characters corresponding to 128 bits. The first 4 bytes correspond to the current
     * time, in seconds, as per X-Ray trace ID format.
     */generateTraceId(){cov_xll5socwd().f[0]++;const nowSec=(cov_xll5socwd().s[6]++,Math.floor(Date.now()/1000).toString(16));cov_xll5socwd().s[7]++;return nowSec+crypto.randomBytes(TRACE_ID_BYTES-TIME_BYTES).toString('hex');}/**
     * Returns a random 8-byte span ID formatted/encoded as a 16 lowercase hex
     * characters corresponding to 64 bits.
     */generateSpanId(){cov_xll5socwd().f[1]++;cov_xll5socwd().s[8]++;return crypto.randomBytes(SPAN_ID_BYTES).toString('hex');}}cov_xll5socwd().s[9]++;exports.AwsXrayIdGenerator=AwsXrayIdGenerator;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3pvY29uZy9Eb2N1bWVudHMvZm9ya2VkL2F3cy1vcGVudGVsZW1ldHJ5LWpzL3BhY2thZ2VzL29wZW50ZWxlbWV0cnktaWQtZ2VuZXJhdG9yLWF3cy14cmF5L3NyYy9wbGF0Zm9ybS9ub2RlL0F3c1hyYXlJZEdlbmVyYXRvci50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3pvY29uZy9Eb2N1bWVudHMvZm9ya2VkL2F3cy1vcGVudGVsZW1ldHJ5LWpzL3BhY2thZ2VzL29wZW50ZWxlbWV0cnktaWQtZ2VuZXJhdG9yLWF3cy14cmF5L3NyYy9wbGF0Zm9ybS9ub2RlL0F3c1hyYXlJZEdlbmVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0dBY0c7OztBQUVILGlDQUFpQztBQUdqQyxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFDeEIsTUFBTSxjQUFjLEdBQUcsRUFBRSxDQUFDO0FBQzFCLE1BQU0sVUFBVSxHQUFHLENBQUMsQ0FBQztBQUVyQjs7R0FFRztBQUNILE1BQWEsa0JBQWtCO0lBRTdCOzs7O09BSUc7SUFDSCxlQUFlO1FBQ2IsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzFELE9BQU8sTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsY0FBYztRQUNaLE9BQU8sTUFBTSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0QsQ0FBQztDQUNGO0FBbkJELGdEQW1CQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgVGhlIE9wZW5UZWxlbWV0cnkgQXV0aG9yc1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCAqIGFzIGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IHsgSWRHZW5lcmF0b3IgfSBmcm9tICdAb3BlbnRlbGVtZXRyeS9jb3JlJztcblxuY29uc3QgU1BBTl9JRF9CWVRFUyA9IDg7XG5jb25zdCBUUkFDRV9JRF9CWVRFUyA9IDE2O1xuY29uc3QgVElNRV9CWVRFUyA9IDQ7XG5cbi8qKiBJZEdlbmVyYXRvciB0aGF0IGdlbmVyYXRlcyB0cmFjZSBJRHMgY29uZm9ybWluZyB0byBBV1MgWC1SYXkgZm9ybWF0LiBcbiAqIGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS94cmF5L2xhdGVzdC9kZXZndWlkZS94cmF5LWFwaS1zZW5kaW5nZGF0YS5odG1sI3hyYXktYXBpLXRyYWNlaWRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBd3NYcmF5SWRHZW5lcmF0b3IgaW1wbGVtZW50cyBJZEdlbmVyYXRvciB7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByYW5kb20gMTYtYnl0ZSB0cmFjZSBJRCBmb3JtYXR0ZWQvZW5jb2RlZCBhcyBhIDMyIGxvd2VyY2FzZSBoZXhcbiAgICogY2hhcmFjdGVycyBjb3JyZXNwb25kaW5nIHRvIDEyOCBiaXRzLiBUaGUgZmlyc3QgNCBieXRlcyBjb3JyZXNwb25kIHRvIHRoZSBjdXJyZW50XG4gICAqIHRpbWUsIGluIHNlY29uZHMsIGFzIHBlciBYLVJheSB0cmFjZSBJRCBmb3JtYXQuXG4gICAqL1xuICBnZW5lcmF0ZVRyYWNlSWQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBub3dTZWMgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKS50b1N0cmluZygxNik7XG4gICAgcmV0dXJuIG5vd1NlYyArIGNyeXB0by5yYW5kb21CeXRlcyhUUkFDRV9JRF9CWVRFUyAtIFRJTUVfQllURVMpLnRvU3RyaW5nKCdoZXgnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcmFuZG9tIDgtYnl0ZSBzcGFuIElEIGZvcm1hdHRlZC9lbmNvZGVkIGFzIGEgMTYgbG93ZXJjYXNlIGhleFxuICAgKiBjaGFyYWN0ZXJzIGNvcnJlc3BvbmRpbmcgdG8gNjQgYml0cy5cbiAgICovXG4gIGdlbmVyYXRlU3BhbklkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyhTUEFOX0lEX0JZVEVTKS50b1N0cmluZygnaGV4Jyk7XG4gIH1cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96b2NvbmcvRG9jdW1lbnRzL2ZvcmtlZC9hd3Mtb3BlbnRlbGVtZXRyeS1qcy9wYWNrYWdlcy9vcGVudGVsZW1ldHJ5LWlkLWdlbmVyYXRvci1hd3MteHJheS9zcmMvcGxhdGZvcm0vbm9kZS9Bd3NYcmF5SWRHZW5lcmF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6ImFBQUE7Ozs7Ozs7Ozs7Ozs7O3VwSUFjRztrT0FFSCxLQUFBLENBQUEsTUFBQSx5QkFBQSxPQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsQ0FHQSxLQUFNLENBQUEsYUFBYSx5QkFBRyxDQUFILENBQW5CLENBQ0EsS0FBTSxDQUFBLGNBQWMseUJBQUcsRUFBSCxDQUFwQixDQUNBLEtBQU0sQ0FBQSxVQUFVLHlCQUFHLENBQUgsQ0FBaEIsQ0FFQTs7R0FHQSxLQUFhLENBQUEsa0JBQWtCLENBRTdCOzs7O09BS0EsZUFBZSxFQUFBLHdCQUNiLEtBQU0sQ0FBQSxNQUFNLHlCQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLEdBQUwsR0FBYSxJQUF4QixFQUE4QixRQUE5QixDQUF1QyxFQUF2QyxDQUFILENBQVosQ0FEYSx1QkFFYixNQUFPLENBQUEsTUFBTSxDQUFHLE1BQU0sQ0FBQyxXQUFQLENBQW1CLGNBQWMsQ0FBRyxVQUFwQyxFQUFnRCxRQUFoRCxDQUF5RCxLQUF6RCxDQUFoQixDQUNELENBRUQ7OztPQUlBLGNBQWMsRUFBQSwrQ0FDWixNQUFPLENBQUEsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsYUFBbkIsRUFBa0MsUUFBbEMsQ0FBMkMsS0FBM0MsQ0FBUCxDQUNELENBbEI0QixDLHVCQUEvQixPQUFBLENBQUEsa0JBQUEsQ0FBQSxrQkFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBJZEdlbmVyYXRvciB9IGZyb20gJ0BvcGVudGVsZW1ldHJ5L2NvcmUnO1xuXG5jb25zdCBTUEFOX0lEX0JZVEVTID0gODtcbmNvbnN0IFRSQUNFX0lEX0JZVEVTID0gMTY7XG5jb25zdCBUSU1FX0JZVEVTID0gNDtcblxuLyoqIElkR2VuZXJhdG9yIHRoYXQgZ2VuZXJhdGVzIHRyYWNlIElEcyBjb25mb3JtaW5nIHRvIEFXUyBYLVJheSBmb3JtYXQuIFxuICogaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL3hyYXkvbGF0ZXN0L2Rldmd1aWRlL3hyYXktYXBpLXNlbmRpbmdkYXRhLmh0bWwjeHJheS1hcGktdHJhY2VpZHNcbiAqL1xuZXhwb3J0IGNsYXNzIEF3c1hyYXlJZEdlbmVyYXRvciBpbXBsZW1lbnRzIElkR2VuZXJhdG9yIHtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHJhbmRvbSAxNi1ieXRlIHRyYWNlIElEIGZvcm1hdHRlZC9lbmNvZGVkIGFzIGEgMzIgbG93ZXJjYXNlIGhleFxuICAgKiBjaGFyYWN0ZXJzIGNvcnJlc3BvbmRpbmcgdG8gMTI4IGJpdHMuIFRoZSBmaXJzdCA0IGJ5dGVzIGNvcnJlc3BvbmQgdG8gdGhlIGN1cnJlbnRcbiAgICogdGltZSwgaW4gc2Vjb25kcywgYXMgcGVyIFgtUmF5IHRyYWNlIElEIGZvcm1hdC5cbiAgICovXG4gIGdlbmVyYXRlVHJhY2VJZCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IG5vd1NlYyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gbm93U2VjICsgY3J5cHRvLnJhbmRvbUJ5dGVzKFRSQUNFX0lEX0JZVEVTIC0gVElNRV9CWVRFUykudG9TdHJpbmcoJ2hleCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByYW5kb20gOC1ieXRlIHNwYW4gSUQgZm9ybWF0dGVkL2VuY29kZWQgYXMgYSAxNiBsb3dlcmNhc2UgaGV4XG4gICAqIGNoYXJhY3RlcnMgY29ycmVzcG9uZGluZyB0byA2NCBiaXRzLlxuICAgKi9cbiAgZ2VuZXJhdGVTcGFuSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKFNQQU5fSURfQllURVMpLnRvU3RyaW5nKCdoZXgnKTtcbiAgfVxufVxuIl19